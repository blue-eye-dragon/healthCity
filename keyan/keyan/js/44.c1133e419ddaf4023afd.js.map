{"version":3,"sources":["webpack:///src/view/superAdmin/user/user.vue","webpack:///./src/view/superAdmin/user/user.vue?e7a4","webpack:///./src/view/superAdmin/user/user.vue"],"names":["path","Object","NODE_ENV","VUE_APP_BASE_API","user","name","components","CustomPic","customPic","ChooseImg","chooseImg","mixins","infoList","data","authOptions","addUserDialog","userInfo","username","password","nickName","headerImg","authorityId","rules","required","message","trigger","min","computed","extends_default","vuex_esm","created","_this","this","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","tableData","ID","CreatedAt","UpdatedAt","uuid","userName","authority","DeletedAt","authorityName","parentId","dataAuthorityId","children","menus","defaultRouter","sideMode","activeColor","baseColor","setOptions","stop","methods","openHeaderChange","$refs","open","authData","setAuthorityOptions","AuthorityData","optionsData","_this2","map","item","length","option","push","_option","deleteUser","_deleteUser","_x","apply","arguments","toString","row","_this3","_callee2","_context2","id","sent","code","getTableData","visible","enterAddUserDialog","_this4","_callee4","_context4","userForm","validate","_ref","_callee3","valid","_context3","register","$message","type","closeAddUserDialog","_x2","resetFields","handleAvatarSuccess","res","file","url","addUser","changeAuthority","_this5","_callee5","_context5","setUserAuthority","user_user","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","size","icon","on","click","_v","border","stripe","label","min-width","scopedSlots","_u","key","fn","scope","style","textAlign","pic-src","prop","options","show-all-levels","props","checkStrictly","value","disabled","emitPath","filterable","change","$event","model","callback","$$v","$set","expression","placement","width","staticStyle","text-align","margin","slot","float","padding","current-page","page","page-size","pageSize","page-sizes","total","layout","current-change","handleCurrentChange","size-change","handleSizeChange","custom-class","title","update:visible","ref","label-width","display","src","target","target-key","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"keyan/js/44.c1133e419ddaf4023afd.js","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"button-box clearflex\">\r\n      <el-button size=\"mini\"\r\n                 type=\"primary\"\r\n                 icon=\"el-icon-plus\"\r\n                 @click=\"addUser\">新增用户</el-button>\r\n    </div>\r\n    <el-table :data=\"tableData\"\r\n              border\r\n              stripe>\r\n      <el-table-column label=\"头像\"\r\n                       min-width=\"50\">\r\n        <template slot-scope=\"scope\">\r\n          <div :style=\"{'textAlign':'center'}\">\r\n            <CustomPic :pic-src=\"scope.row.headerImg\" />\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"uuid\"\r\n                       min-width=\"250\"\r\n                       prop=\"uuid\" />\r\n      <el-table-column label=\"用户名\"\r\n                       min-width=\"150\"\r\n                       prop=\"userName\" />\r\n      <el-table-column label=\"昵称\"\r\n                       min-width=\"150\"\r\n                       prop=\"nickName\" />\r\n      <el-table-column label=\"用户角色\"\r\n                       min-width=\"150\">\r\n        <template slot-scope=\"scope\">\r\n          <el-cascader v-model=\"scope.row.authority.authorityId\"\r\n                       :options=\"authOptions\"\r\n                       :show-all-levels=\"false\"\r\n                       :props=\"{ checkStrictly: true,label:'authorityName',value:'authorityId',disabled:'disabled',emitPath:false}\"\r\n                       filterable\r\n                       @change=\"changeAuthority(scope.row)\" />\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\"\r\n                       min-width=\"150\">\r\n        <template slot-scope=\"scope\">\r\n          <el-popover v-model=\"scope.row.visible\"\r\n                      placement=\"top\"\r\n                      width=\"160\">\r\n            <p>确定要删除此用户吗</p>\r\n            <div style=\"text-align: right; margin: 0\">\r\n              <el-button size=\"mini\"\r\n                         type=\"text\"\r\n                         @click=\"scope.row.visible = false\">取消</el-button>\r\n              <el-button type=\"primary\"\r\n                         size=\"mini\"\r\n                         @click=\"deleteUser(scope.row)\">确定</el-button>\r\n            </div>\r\n            <el-button slot=\"reference\"\r\n                       type=\"danger\"\r\n                       icon=\"el-icon-delete\"\r\n                       size=\"mini\">删除</el-button>\r\n          </el-popover>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination :current-page=\"page\"\r\n                   :page-size=\"pageSize\"\r\n                   :page-sizes=\"[10, 30, 50, 100]\"\r\n                   :style=\"{float:'right',padding:'20px'}\"\r\n                   :total=\"total\"\r\n                   layout=\"total, sizes, prev, pager, next, jumper\"\r\n                   @current-change=\"handleCurrentChange\"\r\n                   @size-change=\"handleSizeChange\" />\r\n\r\n    <el-dialog :visible.sync=\"addUserDialog\"\r\n               custom-class=\"user-dialog\"\r\n               title=\"新增用户\">\r\n      <el-form ref=\"userForm\"\r\n               :rules=\"rules\"\r\n               :model=\"userInfo\">\r\n        <el-form-item label=\"用户名\"\r\n                      label-width=\"80px\"\r\n                      prop=\"username\">\r\n          <el-input v-model=\"userInfo.username\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\"\r\n                      label-width=\"80px\"\r\n                      prop=\"password\">\r\n          <el-input v-model=\"userInfo.password\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"别名\"\r\n                      label-width=\"80px\"\r\n                      prop=\"nickName\">\r\n          <el-input v-model=\"userInfo.nickName\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"头像\"\r\n                      label-width=\"80px\">\r\n          <div style=\"display:inline-block\"\r\n               @click=\"openHeaderChange\">\r\n            <img v-if=\"userInfo.headerImg\"\r\n                 class=\"header-img-box\"\r\n                 :src=\"userInfo.headerImg\">\r\n            <div v-else\r\n                 class=\"header-img-box\">从媒体库选择</div>\r\n          </div>\r\n        </el-form-item>\r\n        <el-form-item label=\"用户角色\"\r\n                      label-width=\"80px\"\r\n                      prop=\"authorityId\">\r\n          <el-cascader v-model=\"userInfo.authorityId\"\r\n                       :options=\"authOptions\"\r\n                       :show-all-levels=\"false\"\r\n                       :props=\"{ checkStrictly: true,label:'authorityName',value:'authorityId',disabled:'disabled',emitPath:false}\"\r\n                       filterable />\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\"\r\n           class=\"dialog-footer\">\r\n        <el-button @click=\"closeAddUserDialog\">取 消</el-button>\r\n        <el-button type=\"primary\"\r\n                   @click=\"enterAddUserDialog\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <ChooseImg ref=\"chooseImg\"\r\n               :target=\"userInfo\"\r\n               :target-key=\"`headerImg`\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n// 获取列表内容封装在mixins内部  getTableData方法 初始化已封装完成\r\nconst path = process.env.VUE_APP_BASE_API\r\n// import {\r\n//   getUserList,\r\n//   setUserAuthority,\r\n//   register,\r\n//   deleteUser\r\n// } from '@/api/user'\r\n// import { getAuthorityList } from '@/api/authority'\r\nimport infoList from '@/mixins/infoList'\r\nimport { mapGetters } from 'vuex'\r\nimport CustomPic from '@/components/customPic'\r\nimport ChooseImg from '@/components/chooseImg'\r\nexport default {\r\n  name: 'Api',\r\n  components: { CustomPic, ChooseImg },\r\n  mixins: [infoList],\r\n  data () {\r\n    return {\r\n      // listApi: getUserList,\r\n      path: path,\r\n      authOptions: [],\r\n      addUserDialog: false,\r\n      userInfo: {\r\n        username: '',\r\n        password: '',\r\n        nickName: '',\r\n        headerImg: '',\r\n        authorityId: ''\r\n      },\r\n      rules: {\r\n        username: [\r\n          { required: true, message: '请输入用户名', trigger: 'blur' },\r\n          { min: 5, message: '最低5位字符', trigger: 'blur' }\r\n        ],\r\n        password: [\r\n          { required: true, message: '请输入用户密码', trigger: 'blur' },\r\n          { min: 6, message: '最低6位字符', trigger: 'blur' }\r\n        ],\r\n        nickName: [\r\n          { required: true, message: '请输入用户昵称', trigger: 'blur' }\r\n        ],\r\n        authorityId: [\r\n          { required: true, message: '请选择用户角色', trigger: 'blur' }\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters('user', ['token'])\r\n  },\r\n  async created () {\r\n    this.tableData = [\r\n      {\r\n        \"ID\": 1,\r\n        \"CreatedAt\": \"2021-06-30T11:07:10+08:00\",\r\n        \"UpdatedAt\": \"2021-06-30T11:08:03+08:00\",\r\n        \"uuid\": \"712a010c-ab54-4768-bdb8-1105f75776b9\",\r\n        \"userName\": \"admin\",\r\n        \"nickName\": \"超级管理员\",\r\n        \"headerImg\": \"http://qmplusimg.henrongyi.top/gva_header.jpg\",\r\n        \"authority\": {\r\n          \"CreatedAt\": \"2021-06-15T15:06:25+08:00\",\r\n          \"UpdatedAt\": \"2021-07-13T11:50:19+08:00\",\r\n          \"DeletedAt\": null,\r\n          \"authorityId\": \"888\",\r\n          \"authorityName\": \"普通用户\",\r\n          \"parentId\": \"0\",\r\n          \"dataAuthorityId\": null,\r\n          \"children\": null,\r\n          \"menus\": null,\r\n          \"defaultRouter\": \"person\"\r\n        },\r\n        \"authorityId\": \"888\",\r\n        \"sideMode\": \"dark\",\r\n        \"activeColor\": \"#1890ff\",\r\n        \"baseColor\": \"#fff\"\r\n      },\r\n      {\r\n        \"ID\": 2,\r\n        \"CreatedAt\": \"2021-06-30T11:07:10+08:00\",\r\n        \"UpdatedAt\": \"2021-06-30T11:07:10+08:00\",\r\n        \"uuid\": \"6158253d-d38e-4e19-b5f4-11ecce918698\",\r\n        \"userName\": \"a303176530\",\r\n        \"nickName\": \"QMPlusUser\",\r\n        \"headerImg\": \"http://qmplusimg.henrongyi.top/1572075907logo.png\",\r\n        \"authority\": {\r\n          \"CreatedAt\": \"2021-06-15T15:06:25+08:00\",\r\n          \"UpdatedAt\": \"2021-06-15T15:06:25+08:00\",\r\n          \"DeletedAt\": null,\r\n          \"authorityId\": \"9528\",\r\n          \"authorityName\": \"测试角色\",\r\n          \"parentId\": \"0\",\r\n          \"dataAuthorityId\": null,\r\n          \"children\": null,\r\n          \"menus\": null,\r\n          \"defaultRouter\": \"dashboard\"\r\n        },\r\n        \"authorityId\": \"9528\",\r\n        \"sideMode\": \"dark\",\r\n        \"activeColor\": \"#1890ff\",\r\n        \"baseColor\": \"#fff\"\r\n      }\r\n    ]\r\n    // this.getTableData()\r\n    // const res = await getAuthorityList({ page: 1, pageSize: 999 })\r\n    this.setOptions([\r\n      {\r\n        \"CreatedAt\": \"2021-06-15T15:06:25+08:00\",\r\n        \"UpdatedAt\": \"2021-06-15T15:06:25+08:00\",\r\n        \"DeletedAt\": null,\r\n        \"authorityId\": \"888\",\r\n        \"authorityName\": \"普通用户\",\r\n        \"parentId\": \"0\",\r\n        \"dataAuthorityId\": [\r\n          {\r\n            \"CreatedAt\": \"2021-06-15T15:06:25+08:00\",\r\n            \"UpdatedAt\": \"2021-06-15T15:06:25+08:00\",\r\n            \"DeletedAt\": null,\r\n            \"authorityId\": \"888\",\r\n            \"authorityName\": \"普通用户\",\r\n            \"parentId\": \"0\",\r\n            \"dataAuthorityId\": null,\r\n            \"children\": null,\r\n            \"menus\": null,\r\n            \"defaultRouter\": \"dashboard\"\r\n          },\r\n          {\r\n            \"CreatedAt\": \"2021-06-15T15:06:25+08:00\",\r\n            \"UpdatedAt\": \"2021-06-15T15:06:25+08:00\",\r\n            \"DeletedAt\": null,\r\n            \"authorityId\": \"8881\",\r\n            \"authorityName\": \"普通用户子角色\",\r\n            \"parentId\": \"888\",\r\n            \"dataAuthorityId\": null,\r\n            \"children\": null,\r\n            \"menus\": null,\r\n            \"defaultRouter\": \"dashboard\"\r\n          },\r\n          {\r\n            \"CreatedAt\": \"2021-06-15T15:06:25+08:00\",\r\n            \"UpdatedAt\": \"2021-06-15T15:06:25+08:00\",\r\n            \"DeletedAt\": null,\r\n            \"authorityId\": \"9528\",\r\n            \"authorityName\": \"测试角色\",\r\n            \"parentId\": \"0\",\r\n            \"dataAuthorityId\": null,\r\n            \"children\": null,\r\n            \"menus\": null,\r\n            \"defaultRouter\": \"dashboard\"\r\n          }\r\n        ],\r\n        \"children\": [\r\n          {\r\n            \"CreatedAt\": \"2021-06-15T15:06:25+08:00\",\r\n            \"UpdatedAt\": \"2021-06-15T15:06:25+08:00\",\r\n            \"DeletedAt\": null,\r\n            \"authorityId\": \"8881\",\r\n            \"authorityName\": \"普通用户子角色\",\r\n            \"parentId\": \"888\",\r\n            \"dataAuthorityId\": [\r\n\r\n            ],\r\n            \"children\": [\r\n\r\n            ],\r\n            \"menus\": null,\r\n            \"defaultRouter\": \"dashboard\"\r\n          }\r\n        ],\r\n        \"menus\": null,\r\n        \"defaultRouter\": \"dashboard\"\r\n      },\r\n      {\r\n        \"CreatedAt\": \"2021-06-15T15:06:25+08:00\",\r\n        \"UpdatedAt\": \"2021-06-15T15:06:25+08:00\",\r\n        \"DeletedAt\": null,\r\n        \"authorityId\": \"9528\",\r\n        \"authorityName\": \"测试角色\",\r\n        \"parentId\": \"0\",\r\n        \"dataAuthorityId\": [\r\n          {\r\n            \"CreatedAt\": \"2021-06-15T15:06:25+08:00\",\r\n            \"UpdatedAt\": \"2021-06-15T15:06:25+08:00\",\r\n            \"DeletedAt\": null,\r\n            \"authorityId\": \"8881\",\r\n            \"authorityName\": \"普通用户子角色\",\r\n            \"parentId\": \"888\",\r\n            \"dataAuthorityId\": null,\r\n            \"children\": null,\r\n            \"menus\": null,\r\n            \"defaultRouter\": \"dashboard\"\r\n          },\r\n          {\r\n            \"CreatedAt\": \"2021-06-15T15:06:25+08:00\",\r\n            \"UpdatedAt\": \"2021-06-15T15:06:25+08:00\",\r\n            \"DeletedAt\": null,\r\n            \"authorityId\": \"9528\",\r\n            \"authorityName\": \"测试角色\",\r\n            \"parentId\": \"0\",\r\n            \"dataAuthorityId\": null,\r\n            \"children\": null,\r\n            \"menus\": null,\r\n            \"defaultRouter\": \"dashboard\"\r\n          }\r\n        ],\r\n        \"children\": [\r\n\r\n        ],\r\n        \"menus\": null,\r\n        \"defaultRouter\": \"dashboard\"\r\n      }\r\n    ])\r\n  },\r\n  methods: {\r\n    openHeaderChange () {\r\n      this.$refs.chooseImg.open()\r\n    },\r\n    setOptions (authData) {\r\n      this.authOptions = []\r\n      this.setAuthorityOptions(authData, this.authOptions)\r\n    },\r\n    setAuthorityOptions (AuthorityData, optionsData) {\r\n      AuthorityData &&\r\n        AuthorityData.map(item => {\r\n          if (item.children && item.children.length) {\r\n            const option = {\r\n              authorityId: item.authorityId,\r\n              authorityName: item.authorityName,\r\n              children: []\r\n            }\r\n            this.setAuthorityOptions(item.children, option.children)\r\n            optionsData.push(option)\r\n          } else {\r\n            const option = {\r\n              authorityId: item.authorityId,\r\n              authorityName: item.authorityName\r\n            }\r\n            optionsData.push(option)\r\n          }\r\n        })\r\n    },\r\n    async deleteUser (row) {\r\n      const res = await deleteUser({ id: row.ID })\r\n      if (res.code === 0) {\r\n        this.getTableData()\r\n        row.visible = false\r\n      }\r\n    },\r\n    async enterAddUserDialog () {\r\n      this.$refs.userForm.validate(async valid => {\r\n        if (valid) {\r\n          const res = await register(this.userInfo)\r\n          if (res.code === 0) {\r\n            this.$message({ type: 'success', message: '创建成功' })\r\n          }\r\n          await this.getTableData()\r\n          this.closeAddUserDialog()\r\n        }\r\n      })\r\n    },\r\n    closeAddUserDialog () {\r\n      this.$refs.userForm.resetFields()\r\n      this.addUserDialog = false\r\n    },\r\n    handleAvatarSuccess (res) {\r\n      this.userInfo.headerImg = res.data.file.url\r\n    },\r\n    addUser () {\r\n      this.addUserDialog = true\r\n    },\r\n    async changeAuthority (row) {\r\n      const res = await setUserAuthority({\r\n        uuid: row.uuid,\r\n        authorityId: row.authority.authorityId\r\n      })\r\n      if (res.code === 0) {\r\n        this.$message({ type: 'success', message: '角色设置成功' })\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.button-box {\r\n  padding: 10px 20px;\r\n  .el-button {\r\n    float: right;\r\n  }\r\n}\r\n\r\n.user-dialog {\r\n  .header-img-box {\r\n    width: 200px;\r\n    height: 200px;\r\n    border: 1px dashed #ccc;\r\n    border-radius: 20px;\r\n    text-align: center;\r\n    line-height: 200px;\r\n    cursor: pointer;\r\n  }\r\n  .avatar-uploader .el-upload:hover {\r\n    border-color: #409eff;\r\n  }\r\n  .avatar-uploader-icon {\r\n    border: 1px dashed #d9d9d9 !important;\r\n    border-radius: 6px;\r\n    font-size: 28px;\r\n    color: #8c939d;\r\n    width: 178px;\r\n    height: 178px;\r\n    line-height: 178px;\r\n    text-align: center;\r\n  }\r\n  .avatar {\r\n    width: 178px;\r\n    height: 178px;\r\n    display: block;\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/view/superAdmin/user/user.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"button-box clearflex\"},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.addUser}},[_vm._v(\"新增用户\")])],1),_vm._v(\" \"),_c('el-table',{attrs:{\"data\":_vm.tableData,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"头像\",\"min-width\":\"50\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{style:({'textAlign':'center'})},[_c('CustomPic',{attrs:{\"pic-src\":scope.row.headerImg}})],1)]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"uuid\",\"min-width\":\"250\",\"prop\":\"uuid\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"用户名\",\"min-width\":\"150\",\"prop\":\"userName\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"昵称\",\"min-width\":\"150\",\"prop\":\"nickName\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"用户角色\",\"min-width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-cascader',{attrs:{\"options\":_vm.authOptions,\"show-all-levels\":false,\"props\":{ checkStrictly: true,label:'authorityName',value:'authorityId',disabled:'disabled',emitPath:false},\"filterable\":\"\"},on:{\"change\":function($event){return _vm.changeAuthority(scope.row)}},model:{value:(scope.row.authority.authorityId),callback:function ($$v) {_vm.$set(scope.row.authority, \"authorityId\", $$v)},expression:\"scope.row.authority.authorityId\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"min-width\":\"150\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-popover',{attrs:{\"placement\":\"top\",\"width\":\"160\"},model:{value:(scope.row.visible),callback:function ($$v) {_vm.$set(scope.row, \"visible\", $$v)},expression:\"scope.row.visible\"}},[_c('p',[_vm._v(\"确定要删除此用户吗\")]),_vm._v(\" \"),_c('div',{staticStyle:{\"text-align\":\"right\",\"margin\":\"0\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":function($event){scope.row.visible = false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteUser(scope.row)}}},[_vm._v(\"确定\")])],1),_vm._v(\" \"),_c('el-button',{attrs:{\"slot\":\"reference\",\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},slot:\"reference\"},[_vm._v(\"删除\")])],1)]}}])})],1),_vm._v(\" \"),_c('el-pagination',{style:({float:'right',padding:'20px'}),attrs:{\"current-page\":_vm.page,\"page-size\":_vm.pageSize,\"page-sizes\":[10, 30, 50, 100],\"total\":_vm.total,\"layout\":\"total, sizes, prev, pager, next, jumper\"},on:{\"current-change\":_vm.handleCurrentChange,\"size-change\":_vm.handleSizeChange}}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"visible\":_vm.addUserDialog,\"custom-class\":\"user-dialog\",\"title\":\"新增用户\"},on:{\"update:visible\":function($event){_vm.addUserDialog=$event}}},[_c('el-form',{ref:\"userForm\",attrs:{\"rules\":_vm.rules,\"model\":_vm.userInfo}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"label-width\":\"80px\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.userInfo.username),callback:function ($$v) {_vm.$set(_vm.userInfo, \"username\", $$v)},expression:\"userInfo.username\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"密码\",\"label-width\":\"80px\",\"prop\":\"password\"}},[_c('el-input',{model:{value:(_vm.userInfo.password),callback:function ($$v) {_vm.$set(_vm.userInfo, \"password\", $$v)},expression:\"userInfo.password\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"别名\",\"label-width\":\"80px\",\"prop\":\"nickName\"}},[_c('el-input',{model:{value:(_vm.userInfo.nickName),callback:function ($$v) {_vm.$set(_vm.userInfo, \"nickName\", $$v)},expression:\"userInfo.nickName\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"头像\",\"label-width\":\"80px\"}},[_c('div',{staticStyle:{\"display\":\"inline-block\"},on:{\"click\":_vm.openHeaderChange}},[(_vm.userInfo.headerImg)?_c('img',{staticClass:\"header-img-box\",attrs:{\"src\":_vm.userInfo.headerImg}}):_c('div',{staticClass:\"header-img-box\"},[_vm._v(\"从媒体库选择\")])])]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"用户角色\",\"label-width\":\"80px\",\"prop\":\"authorityId\"}},[_c('el-cascader',{attrs:{\"options\":_vm.authOptions,\"show-all-levels\":false,\"props\":{ checkStrictly: true,label:'authorityName',value:'authorityId',disabled:'disabled',emitPath:false},\"filterable\":\"\"},model:{value:(_vm.userInfo.authorityId),callback:function ($$v) {_vm.$set(_vm.userInfo, \"authorityId\", $$v)},expression:\"userInfo.authorityId\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.closeAddUserDialog}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.enterAddUserDialog}},[_vm._v(\"确 定\")])],1)],1),_vm._v(\" \"),_c('ChooseImg',{ref:\"chooseImg\",attrs:{\"target\":_vm.userInfo,\"target-key\":\"headerImg\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7278c031\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/view/superAdmin/user/user.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7278c031\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./user.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./user.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./user.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7278c031\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./user.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view/superAdmin/user/user.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}