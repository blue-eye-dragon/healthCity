webpackJsonp([56],{dvGe:function(e,t){},jljL:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("mvHQ"),r=a.n(s),i=function(e){return e.name+r()(e.query)+r()(e.params)},n={name:"history",data:function(){return{historys:[],activeValue:"workState",contextMenuVisible:!1,left:"",top:"",activeColor:"#1890ff",defaultRouter:"workState"}},created:function(){var e=[{name:this.defaultRouter,meta:{title:"工作台"},query:{},params:{}}];this.historys=JSON.parse(sessionStorage.getItem("historys"))||e,console.log(),window.sessionStorage.getItem("activeValue")?this.activeValue=window.sessionStorage.getItem("activeValue"):this.activeValue=this.defaultRouter,this.setTab(this.$route)},watch:{$route:function(e,t){this.setTab(e),sessionStorage.setItem("historys",r()(this.historys)),this.activeValue=window.sessionStorage.getItem("activeValue"),t&&e&&t.name===e.name&&this.bus.$emit("reload")}},methods:{name:function(e){return e.name+r()(e.query)+r()(e.params)},setTab:function(e){var t=this;if("layout"===e.name)return!1;if(!this.historys.some(function(a){return t.isSame(a,e)})){var a={};a.name=e.name,a.meta=e.meta,a.query=e.query,a.params=e.params,this.historys.push(a)}window.sessionStorage.setItem("activeValue",i(this.$route))},isSame:function(e,t){if(e.name!==t.name)return!1;for(var a in e.query)if(e.query[a]!==t.query[a])return!1;for(var s in e.params)if(e.params[s]!==t.params[s])return!1;return!0},openContextMenu:function(){},handleClick:function(e){var t=e.$attrs.tab;this.$router.push({name:t.name,query:t.query,params:t.params})},removeTab:function(e){var t=this.historys.findIndex(function(t){return i(t)===e});i(this.$route)===e&&(1===this.historys.length?this.$router.push({name:this.defaultRouter}):t<this.historys.length-1?this.$router.push({name:this.historys[t+1].name,query:this.historys[t+1].query,params:this.historys[t+1].params}):this.$router.push({name:this.historys[t-1].name,query:this.historys[t-1].query,params:this.historys[t-1].params})),this.historys.splice(t,1)}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{attrs:{type:"border-card",closable:!(1===e.historys.length&&"workState"===this.$route.name)},on:{"tab-click":e.handleClick,"tab-remove":e.removeTab},model:{value:e.activeValue,callback:function(t){e.activeValue=t},expression:"activeValue"}},e._l(e.historys,function(t){return a("el-tab-pane",{key:e.name(t),staticClass:"gva-tab",attrs:{label:t.meta.title,name:e.name(t),tab:t}},[a("span",{style:{color:e.activeValue===e.name(t)?e.activeColor:"#333"},attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-reading",style:{color:e.activeValue===e.name(t)?e.activeColor:"#ddd"}}),e._v(" "+e._s(t.meta.title))])])}),1)],1)},staticRenderFns:[]};var u=a("VU/8")(n,o,!1,function(e){a("dvGe")},null,null);t.default=u.exports}});
//# sourceMappingURL=56.1761c3925f8b25b63a70.js.map